"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[80900],{15680:(e,n,t)=>{t.d(n,{xA:()=>d,yg:()=>h});var a=t(96540);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),u=c(t),g=i,h=u["".concat(s,".").concat(g)]||u[g]||p[g]||o;return t?a.createElement(h,l(l({ref:n},d),{},{components:t})):a.createElement(h,l({ref:n},d))}));function h(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,l=new Array(o);l[0]=g;var r={};for(var s in n)hasOwnProperty.call(n,s)&&(r[s]=n[s]);r.originalType=e,r[u]="string"==typeof e?e:i,l[1]=r;for(var c=2;c<o;c++)l[c]=t[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},40826:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var a=t(58168),i=(t(96540),t(15680));const o={title:"Use DolphinScheduler third-party scheduling engine",sidebar_position:2},l=void 0,r={unversionedId:"quick_start/offline_data_sync/dolphinscheduler_example",id:"quick_start/offline_data_sync/dolphinscheduler_example",title:"Use DolphinScheduler third-party scheduling engine",description:"In the following content, we will introduce how to use DolphinScheduler, a third-party schedule engine in Apache InLong to create offline data synchronization.",source:"@site/docs/quick_start/offline_data_sync/dolphinscheduler_example.md",sourceDirName:"quick_start/offline_data_sync",slug:"/quick_start/offline_data_sync/dolphinscheduler_example",permalink:"/zh-CN/docs/next/quick_start/offline_data_sync/dolphinscheduler_example",draft:!1,editUrl:"https://github.com/apache/inlong-website/edit/master/docs/quick_start/offline_data_sync/dolphinscheduler_example.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Use DolphinScheduler third-party scheduling engine",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Use Quartz built-in scheduling engine",permalink:"/zh-CN/docs/next/quick_start/offline_data_sync/quartz_example"},next:{title:"HTTP \u4e0a\u62a5\u793a\u4f8b",permalink:"/zh-CN/docs/next/quick_start/data_http_report/http_report"}},s={},c=[{value:"Deployment",id:"deployment",level:2},{value:"Install InLong",id:"install-inlong",level:3},{value:"Add Connectors",id:"add-connectors",level:3},{value:"Operations on DolphinScheduler",id:"operations-on-dolphinscheduler",level:3},{value:"Modify configuration in InLong Manager",id:"modify-configuration-in-inlong-manager",level:3},{value:"Use DolphinScheduler in offline synchronization",id:"use-dolphinscheduler-in-offline-synchronization",level:3},{value:"Test Data",id:"test-data",level:2},{value:"Sending Data",id:"sending-data",level:3},{value:"Data Validation",id:"data-validation",level:3}],d={toc:c},u="wrapper";function p(e){let{components:n,...o}=e;return(0,i.yg)(u,(0,a.A)({},d,o,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("p",null,"In the following content, we will introduce how to use DolphinScheduler, a third-party schedule engine in Apache InLong to create offline data synchronization."),(0,i.yg)("h2",{id:"deployment"},"Deployment"),(0,i.yg)("h3",{id:"install-inlong"},"Install InLong"),(0,i.yg)("p",null,"Before we begin, we need to install InLong and a usable DolphinScheduler. Here we provide two ways:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"/zh-CN/docs/next/deployment/docker"},"Docker Deployment")," (Recommended)"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"/zh-CN/docs/next/deployment/bare_metal"},"Bare Metal Deployment"))),(0,i.yg)("h3",{id:"add-connectors"},"Add Connectors"),(0,i.yg)("p",null,"Download the ",(0,i.yg)("a",{parentName:"p",href:"https://inlong.apache.org/downloads/"},"connectors")," corresponding to Flink version, and after decompression, place ",(0,i.yg)("inlineCode",{parentName:"p"},"sort-connector-jdbc-[version]-SNAPSHOT.jar")," in ",(0,i.yg)("inlineCode",{parentName:"p"},"/inlong-sort/connectors/")," directory."),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},"Currently, Apache InLong's offline data synchronization capability only supports Flink-1.18, so please download the 1.18 version of connectors.")),(0,i.yg)("h3",{id:"operations-on-dolphinscheduler"},"Operations on DolphinScheduler"),(0,i.yg)("p",null,"Before using DolphinScheduler as your scheduling engine, please make sure you have a working DolphinScheduler on hand. If you need to deploy a DolphinScheduler for yourself, please refer to the ",(0,i.yg)("a",{parentName:"p",href:"https://dolphinscheduler.apache.org/zh-cn"},"DolphinScheduler Official Document"),"."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"DolphinScheduler Security",src:t(39921).A,width:"3324",height:"1538"})),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"DolphinScheduler Token Manager",src:t(4580).A,width:"3488",height:"1192"})),(0,i.yg)("p",null,"Go into Token Manager page to create a token for InLong to access."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"DolphinScheduler Token Generate",src:t(42912).A,width:"1538",height:"910"})),(0,i.yg)("p",null,"Set parameters for the token according to the steps in the figure, include ","[Expiration Time]",", ","[User]",", then generate a token."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"DolphinScheduler Token Copy",src:t(17250).A,width:"2972",height:"702"})),(0,i.yg)("h3",{id:"modify-configuration-in-inlong-manager"},"Modify configuration in InLong Manager"),(0,i.yg)("p",null,"For third-party scheduling engine, we need to modify configurations in manager."),(0,i.yg)("p",null,"For DolphinScheduler engine there are following configurations need to be modified:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"schedule.engine.inlong.manager.url")," : Third-party scheduling engine needs to access the inlong manager through this url."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"schedule.engine.dolphinscheduler.url")," : DolphinScheduler deployment url, general format is http://{ip}:{port}/dolphinscheduler"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"schedule.engine.dolphinscheduler.token")," : Token you just generated in Token Manager of DolphinScheduler.")),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"InLong Manager Configuration",src:t(69377).A,width:"1426",height:"268"})),(0,i.yg)("p",null,"After doing this, restart the InLong Manager to ensure the configuration is enabled."),(0,i.yg)("h3",{id:"use-dolphinscheduler-in-offline-synchronization"},"Use DolphinScheduler in offline synchronization"),(0,i.yg)("p",null,"During configure the offline synchronization task, choose DolphinScheduler when selecting the scheduling engine, then configure other parameters."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"DolphinScheduler Task Configuration",src:t(11095).A,width:"1267",height:"874"})),(0,i.yg)("p",null,"For details about how to manage clusters and configure data nodes, see ",(0,i.yg)("a",{parentName:"p",href:"/zh-CN/docs/next/quick_start/offline_data_sync/quartz_example"},"Use Quartz built-in scheduling engine"),"."),(0,i.yg)("p",null,"After approval data flow, return to the ","[Synchronization]"," page and wait for the task configuration to succeed. Once configured successfully, the DolphinScheduler will periodically calls back InLong to synchronize offline data and the Manager will periodically submit Flink Batch Jobs to the Flink cluster."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"DolphinScheduler Schedule Process",src:t(10426).A,width:"3676",height:"1090"})),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"DolphinScheduler Process Success",src:t(72280).A,width:"3570",height:"1386"})),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"DolphinScheduler Process Instance",src:t(21216).A,width:"3614",height:"1370"})),(0,i.yg)("p",null,"View the DolphinScheduler task instance logs. The following logs indicate that the configuration is successful."),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"DolphinScheduler Schedule Success",src:t(4200).A,width:"2362",height:"1170"})),(0,i.yg)("h2",{id:"test-data"},"Test Data"),(0,i.yg)("h3",{id:"sending-data"},"Sending Data"),(0,i.yg)("p",null,"Use the Pulsar SDK to produce data into the Pulsar topic. An example is as follows:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'        // Create Pulsar client and producer\n        PulsarClient pulsarClient = PulsarClient.builder().serviceUrl("pulsar://localhost:6650").build();\n        Producer<byte[]> producer = pulsarClient.newProducer().topic("public/default/test").create();\n\n        // Send messages\n        for (int i = 0; i < 10000; i++) {\n            // Field separator is |\n            String msgStr = i + "|msg-" + i;\n            MessageId msgId = producer.send(msgStr.getBytes(StandardCharsets.UTF_8));\n            System.out.println("Send msg : " + msgStr + " with msgId: " + msgId);\n        }\n')),(0,i.yg)("h3",{id:"data-validation"},"Data Validation"),(0,i.yg)("p",null,"Then enter MySQL to check the data in the table:"),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"MySQL Result",src:t(18747).A,width:"307",height:"441"})))}p.isMDXComponent=!0},21216:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_process_instance-13d2312aaf3a5d724957ca92a7a10e63.png"},72280:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_process_success-2d9bce0ac8fcd9e5f9443ae9510ac3b2.png"},10426:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_schedule_process-daabe1713e91621a1f1ed9faa562985c.png"},4200:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_schedule_success-28c0ed6cfb28fdba02f90ae4133b7675.png"},39921:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_security-6242a4af69d39014a90edd3be2a2e6be.png"},11095:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_task_conf-46191374c152931c57283fb78b18e119.png"},17250:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_token_copy-5c3eb16643925e642c1ff01cfcd56d62.png"},42912:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_token_generate-92a4fe012b0c783bc1682f949c25abf5.png"},4580:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/ds_token_manager-9ee76465b9f93c4e73c076848cb27689.png"},69377:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/inlong_manager_conf-e9400d609bc738d6d08089785a6ea935.png"},18747:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/mysql_result-2ae22dcfef35ab70a315b8ac6658c2a4.png"}}]);