---
title: 数据流示例
sidebar_position: 3
---

# 流配置示例

这里列出一些流配置示例以做参考。

## 读 MySQL 写 Kafka 

单表或者分库分表同步配置示例如下：

```json
{
    "groupId":"1",
    "streams":[
        {
            "streamId":"1",
            "nodes":[
                {
                    "type":"mysqlExtract",
                    "id":"1",
                    "name":"mysql_input",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "properties":{
                        "append-mode":"true"
                    },
                    "primaryKey":"id",
                    "tableNames":[
                        "YOUR_TABLE"
                    ],
                    "hostname":"YOUR_MYSQL_HOST",
                    "username":"YOUR_USERNAME",
                    "password":"YOUR_PASSWORD",
                    "database":"YOUR_DATABASE",
                    "port":3306,
                    "incrementalSnapshotEnabled":true
                },
                {
                    "type":"kafkaLoad",
                    "id":"2",
                    "name":"kafka_output",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "fieldRelationShips":[
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    },
                    "primaryKey":"id"
                }
            ],
            "relations":[
                {
                    "type":"baseRelation",
                    "inputs":[
                        "1"
                    ],
                    "outputs":[
                        "2"
                    ]
                }
            ]
        }
    ]
}
```

整库迁移配置示例：

```json
{
  "groupId":"1",
  "streams":[
    {
      "streamId":"1",
      "nodes":[
        {
          "type":"mysqlExtract",
          "id":"1",
          "name":"mysql_input",
          "fields":[
            {
              "type":"builtin",
              "name":"data",
              "formatInfo":{
                "type":"string"
              },
              "builtinField":"MYSQL_METADATA_DATA"
            }
          ],
          "properties":{
            "append-mode":"true",
            "migrate-all":"true"
          },
          "tableNames":[
            "[\\s\\S]*.*"
          ],
          "hostname":"YOUR_MYSQL_HOST",
          "username":"YOUR_USERNAME",
          "password":"YOUR_PASSWORD",
          "database":"[\\s\\S]*.*",
          "port":3306,
          "incrementalSnapshotEnabled":false
        },
        {
          "type":"kafkaLoad",
          "id":"2",
          "name":"kafka_output",
          "fields":[
            {
              "type":"base",
              "name":"data",
              "formatInfo":{
                "type":"string"
              }
            }
          ],
          "fieldRelationShips":[
            {
              "type":"fieldRelationShip",
              "inputField":{
                "type":"base",
                "name":"data",
                "formatInfo":{
                  "type":"string"
                }
              },
              "outputField":{
                "type":"base",
                "name":"data",
                "formatInfo":{
                  "type":"string"
                }
              }
            }
          ],
          "topic":"YOUR_TOPIC",
          "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
          "format":{
            "type":"csvFormat",
            "fieldDelimiter":",",
            "disableQuoteCharacter":true,
            "quoteCharacter":null,
            "allowComments":false,
            "ignoreParseErrors":true,
            "arrayElementDelimiter":";",
            "escapeCharacter":null,
            "nullLiteral":null
          }
        }
      ],
      "relations":[
        {
          "type":"baseRelation",
          "inputs":[
            "1"
          ],
          "outputs":[
            "2"
          ]
        }
      ]
    }
  ]
}
```

## 读 Kafka 写 Hive

```json
{
  "groupId":"1",
  "streams":[
    {
      "streamId":"1",
      "nodes":[
        {
          "type":"kafkaExtract",
          "id":"1",
          "name":"kafka_input",
          "fields":[
            {
              "type":"base",
              "name":"id",
              "formatInfo":{
                "type":"long"
              }
            },
            {
              "type":"base",
              "name":"name",
              "formatInfo":{
                "type":"string"
              }
            },
            {
              "type":"base",
              "name":"age",
              "formatInfo":{
                "type":"int"
              }
            }
          ],
          "topic":"YOUR_TOPIC",
          "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
          "format":{
            "type":"jsonFormat",
            "failOnMissingField":false,
            "ignoreParseErrors":true,
            "timestampFormatStandard":"SQL",
            "mapNullKeyMode":"DROP",
            "mapNullKeyLiteral":"null",
            "encodeDecimalAsPlainNumber":true
          },
          "scanStartupMode":"EARLIEST_OFFSET"
        },
        {
          "type":"hiveLoad",
          "id":"2",
          "name":"hive_output",
          "fields":[
            {
              "type":"base",
              "name":"id",
              "formatInfo":{
                "type":"long"
              }
            },
            {
              "type":"base",
              "name":"name",
              "formatInfo":{
                "type":"string"
              }
            },
            {
              "type":"base",
              "name":"age",
              "formatInfo":{
                "type":"int"
              }
            }
          ],
          "fieldRelationShips":[
            {
              "type":"fieldRelationShip",
              "inputField":{
                "type":"base",
                "name":"id",
                "formatInfo":{
                  "type":"long"
                }
              },
              "outputField":{
                "type":"base",
                "name":"id",
                "formatInfo":{
                  "type":"long"
                }
              }
            },
            {
              "type":"fieldRelationShip",
              "inputField":{
                "type":"base",
                "name":"name",
                "formatInfo":{
                  "type":"string"
                }
              },
              "outputField":{
                "type":"base",
                "name":"name",
                "formatInfo":{
                  "type":"string"
                }
              }
            },
            {
              "type":"fieldRelationShip",
              "inputField":{
                "type":"base",
                "name":"age",
                "formatInfo":{
                  "type":"int"
                }
              },
              "outputField":{
                "type":"base",
                "name":"age",
                "formatInfo":{
                  "type":"int"
                }
              }
            }
          ],
          "sinkParallelism":1,
          "catalogName":"hivecatlog",
          "database":"YOUR_DATABASE",
          "tableName":"YOUR_TABLE_NAME",
          "hiveConfDir":"YOUR_HIVE_CONF_DIR",
          "hiveVersion":"3.1.2",
          "hadoopConfDir":"YOUR_HADOOP_CONF_DIR"
        }
      ],
      "relations":[
        {
          "type":"baseRelation",
          "inputs":[
            "1"
          ],
          "outputs":[
            "2"
          ]
        }
      ]
    }
  ]
}
```

## Transform 示例

目前我们仅支持字符串分割，字符串正则替换，字符串正则替换第一个匹配值、数据去重、数据过滤、常规 Join 等，
下面以读 Kafka 写 Kafka 为例来说明各个 Transform 的具体用法。
- 字符串分割:

```json
{
    "groupId":"1",
    "streams":[
        {
            "streamId":"1",
            "nodes":[
                {
                    "type":"kafkaExtract",
                    "id":"1",
                    "name":"kafka_input",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    },
                    "scanStartupMode":"EARLIEST_OFFSET"
                },
                {
                    "type":"kafkaLoad",
                    "id":"2",
                    "name":"kafka_output",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "fieldRelationShips":[
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"splitIndex",
                                "field":{
                                    "type":"base",
                                    "name":"name",
                                    "formatInfo":{
                                        "type":"string"
                                    }
                                },
                                "separator":{
                                    "type":"stringConstant",
                                    "value":"YOUR_SPLIT_STR"
                                },
                                "index":{
                                    "type":"constant",
                                    "value":0
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    }
                }
            ],
            "relations":[
                {
                    "type":"baseRelation",
                    "inputs":[
                        "1"
                    ],
                    "outputs":[
                        "2"
                    ]
                }
            ]
        }
    ]
}
```

- 字符串正则替换:

```json
{
    "groupId":"1",
    "streams":[
        {
            "streamId":"1",
            "nodes":[
                {
                    "type":"kafkaExtract",
                    "id":"1",
                    "name":"kafka_input",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    },
                    "scanStartupMode":"EARLIEST_OFFSET"
                },
                {
                    "type":"kafkaLoad",
                    "id":"2",
                    "name":"kafka_output",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "fieldRelationShips":[
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"regexpReplace",
                                "field":{
                                    "type":"base",
                                    "name":"name",
                                    "formatInfo":{
                                        "type":"string"
                                    }
                                },
                                "regex":{
                                    "type":"stringConstant",
                                    "value":"YOUR_REPLACE_REGEX"
                                },
                                "replacement":{
                                    "type":"stringConstant",
                                    "value":"YOUR_REPLACEMENT"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    }
                }
            ],
            "relations":[
                {
                    "type":"baseRelation",
                    "inputs":[
                        "1"
                    ],
                    "outputs":[
                        "2"
                    ]
                }
            ]
        }
    ]
}
```

- 字符串正则替换第一个匹配值:

```json
{
    "groupId":"1",
    "streams":[
        {
            "streamId":"1",
            "nodes":[
                {
                    "type":"kafkaExtract",
                    "id":"1",
                    "name":"kafka_input",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    },
                    "scanStartupMode":"EARLIEST_OFFSET"
                },
                {
                    "type":"kafkaLoad",
                    "id":"2",
                    "name":"kafka_output",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "fieldRelationShips":[
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"regexpReplaceFirst",
                                "field":{
                                    "type":"base",
                                    "name":"name",
                                    "formatInfo":{
                                        "type":"string"
                                    }
                                },
                                "regex":{
                                    "type":"stringConstant",
                                    "value":"YOUR_REPLACE_REGEX"
                                },
                                "replacement":{
                                    "type":"stringConstant",
                                    "value":"YOUR_REPLACEMENT"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    }
                }
            ],
            "relations":[
                {
                    "type":"baseRelation",
                    "inputs":[
                        "1"
                    ],
                    "outputs":[
                        "2"
                    ]
                }
            ]
        }
    ]
}
```

- 数据过滤:

```json
{
    "groupId":"1",
    "streams":[
        {
            "streamId":"1",
            "nodes":[
                {
                    "type":"kafkaExtract",
                    "id":"1",
                    "name":"kafka_input",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    },
                    "scanStartupMode":"EARLIEST_OFFSET"
                },
                {
                    "type":"kafkaLoad",
                    "id":"2",
                    "name":"kafka_output",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "fieldRelationShips":[
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            }
                        }
                    ],
                    "filters":[
                        {
                            "type":"singleValueFilter",
                            "logicOperator":{
                                "type":"empty"
                            },
                            "source":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            },
                            "compareOperator":{
                                "type":"moreThanOrEqual"
                            },
                            "target":{
                                "type":"constant",
                                "value":18
                            }
                        },
                        {
                            "type":"singleValueFilter",
                            "logicOperator":{
                                "type":"and"
                            },
                            "source":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            },
                            "compareOperator":{
                                "type":"moreThanOrEqual"
                            },
                            "target":{
                                "type":"constant",
                                "value":25
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    }
                }
            ],
            "relations":[
                {
                    "type":"baseRelation",
                    "inputs":[
                        "1"
                    ],
                    "outputs":[
                        "2"
                    ]
                }
            ]
        }
    ]
}
```
- 数据去重:

```json
{
    "groupId":"1",
    "streams":[
        {
            "streamId":"1",
            "nodes":[
                {
                    "type":"kafkaExtract",
                    "id":"1",
                    "name":"kafka_input",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        },
                        {
                            "type":"builtin",
                            "name":"proctime",
                            "formatInfo":{
                                "type":"time",
                                "format":"HH:mm:ss"
                            },
                            "builtinField":"PROCESS_TIME"
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    },
                    "scanStartupMode":"EARLIEST_OFFSET"
                },
                {
                    "type":"distinct",
                    "id":"2",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "fieldRelationShips":[
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            }
                        }
                    ],
                    "distinctFields":[
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        }
                    ],
                    "orderField":{
                        "type":"base",
                        "name":"proctime",
                        "formatInfo":{
                            "type":"timestamp",
                            "precision":2,
                            "format":"yyyy-MM-dd HH:mm:ss"
                        }
                    },
                    "orderDirection":"ASC"
                },
                {
                    "type":"kafkaLoad",
                    "id":"3",
                    "name":"kafka_output",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "fieldRelationShips":[
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            },
                            "outputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    }
                }
            ],
            "relations":[
                {
                    "type":"baseRelation",
                    "inputs":[
                        "1"
                    ],
                    "outputs":[
                        "2"
                    ]
                },
                {
                    "type":"baseRelation",
                    "inputs":[
                        "2"
                    ],
                    "outputs":[
                        "3"
                    ]
                }
            ]
        }
    ]
}
```

- 常规 Join :

```json
{
    "groupId":"1",
    "streams":[
        {
            "streamId":"1",
            "nodes":[
                {
                    "type":"kafkaExtract",
                    "id":"1",
                    "name":"kafka_input_1",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    },
                    "scanStartupMode":"EARLIEST_OFFSET"
                },
                {
                    "type":"kafkaExtract",
                    "id":"2",
                    "name":"kafka_input_2",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    },
                    "scanStartupMode":"EARLIEST_OFFSET"
                },
                {
                    "type":"baseTransform",
                    "id":"3",
                    "name":"transform_node",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "fieldRelationShips":[
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                },
                                "nodeId":"1"
                            },
                            "outputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                },
                                "nodeId":"1"
                            },
                            "outputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                },
                                "nodeId":"2"
                            },
                            "outputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            }
                        }
                    ]
                },
                {
                    "type":"kafkaLoad",
                    "id":"4",
                    "name":"kafka_output",
                    "fields":[
                        {
                            "type":"base",
                            "name":"id",
                            "formatInfo":{
                                "type":"long"
                            }
                        },
                        {
                            "type":"base",
                            "name":"name",
                            "formatInfo":{
                                "type":"string"
                            }
                        },
                        {
                            "type":"base",
                            "name":"age",
                            "formatInfo":{
                                "type":"int"
                            }
                        }
                    ],
                    "fieldRelationShips":[
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                },
                                "nodeId":"1"
                            },
                            "outputField":{
                                "type":"base",
                                "name":"id",
                                "formatInfo":{
                                    "type":"long"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                },
                                "nodeId":"1"
                            },
                            "outputField":{
                                "type":"base",
                                "name":"name",
                                "formatInfo":{
                                    "type":"string"
                                }
                            }
                        },
                        {
                            "type":"fieldRelationShip",
                            "inputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                },
                                "nodeId":"2"
                            },
                            "outputField":{
                                "type":"base",
                                "name":"age",
                                "formatInfo":{
                                    "type":"int"
                                }
                            }
                        }
                    ],
                    "topic":"YOUR_TOPIC",
                    "bootstrapServers":"YOUR_KAFKA_BOOTSTRAP_SERVERS",
                    "format":{
                        "type":"jsonFormat",
                        "failOnMissingField":false,
                        "ignoreParseErrors":true,
                        "timestampFormatStandard":"SQL",
                        "mapNullKeyMode":"DROP",
                        "mapNullKeyLiteral":"null",
                        "encodeDecimalAsPlainNumber":true
                    }
                }
            ],
            "relations":[
                {
                    "type":"innerJoin",
                    "inputs":[
                        "1",
                        "2"
                    ],
                    "outputs":[
                        "3"
                    ],
                    "joinConditionMap":{
                        "2":[
                            {
                                "type":"singleValueFilter",
                                "logicOperator":{
                                    "type":"empty"
                                },
                                "source":{
                                    "type":"base",
                                    "name":"id",
                                    "formatInfo":{
                                        "type":"long"
                                    },
                                    "nodeId":"1"
                                },
                                "compareOperator":{
                                    "type":"equal"
                                },
                                "target":{
                                    "type":"base",
                                    "name":"id",
                                    "formatInfo":{
                                        "type":"long"
                                    },
                                    "nodeId":"2"
                                }
                            }
                        ]
                    }
                },
                {
                    "type":"baseRelation",
                    "inputs":[
                        "3"
                    ],
                    "outputs":[
                        "4"
                    ]
                }
            ]
        }
    ]
}
```